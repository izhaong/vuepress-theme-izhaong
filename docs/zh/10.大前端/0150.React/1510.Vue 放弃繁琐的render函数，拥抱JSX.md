---

title: Vue æ”¾å¼ƒç¹ççš„renderå‡½æ•°ï¼Œæ‹¥æŠ±JSX
date: 2021-11-29 22:33:14
permalink: /pages/5e7846/
categories:
  - å¤§å‰ç«¯
  - React
tags:
  - 
---
## èƒŒæ™¯
å¦‚æœä½ å†™äº†å¾ˆå¤š render å‡½æ•°ï¼Œå¯èƒ½ä¼šè§‰å¾—ä¸‹é¢è¿™æ ·çš„ä»£ç å†™èµ·æ¥å¾ˆç—›è‹¦ï¼š
```vue
createElement(
  'anchored-heading', {
    props: {
      level: 1
    }
  }, [
    createElement('span', 'Hello'),
    ' world!'
  ]
)
```
```vue
[
	{ label: 'æœ€è¿‘æ›´æ–°æ—¶é—´', prop: 'update_time', align: 'center', visible: false },
  {
    label: 'æ“ä½œ', align: 'center', 'min-width': '180px', render: (h, { row }) => {
      return h('div',
        [h('el-popconfirm', {
          props: { title: 'ç¡®å®šåˆ é™¤å—ï¼Ÿ', 'confirm-button-type': 'danger' },
          class: 'mr-10',
          on: {
            confirm: () => { this.delItem(row) }
          }
        },
        [h('el-button', { slot: 'reference', props: { size: 'mini', type: 'danger' }}, 'åˆ é™¤')]),
        h('el-button', { props: { size: 'mini', type: 'primary' }, nativeOn: { click: () => { this.editItem(row) } }}, 'ç¼–è¾‘')]
      )
    }
  }
]
```
ç‰¹åˆ«æ˜¯å¯¹åº”çš„æ¨¡æ¿å¦‚æ­¤ç®€å•çš„æƒ…å†µä¸‹ï¼š
```vue
<anchored-heading :level='1'>
  <span>Hello</span> world!
</anchored-heading>
```
```jsx
<el-popconfirm
	title='ç¡®å®šåˆ é™¤å—ï¼Ÿ'
	'confirm-button-type'='danger'  
  onConfirm='() => this.delItem(row)'
>
   <el-button slot='reference' size='mini' type='danger'>åˆ é™¤</el-button>
</el-popconfirm>

<el-button size='mini' type='danger' onClick={() => this.editItem(row)}>ç¼–è¾‘</el-button>

```
## å®‰è£…é…ç½®
### babel7 (vue cli é»˜è®¤æ˜¯ä½¿ç”¨äº†babel7çš„ï¼‰
### å®‰è£…babelæ’ä»¶
`npm install @vue/babel-preset-jsx @vue/babel-helper-vue-jsx-merge-props`

- é…ç½®`babel.config.js`
```vue
module.exports = {
  presets: ['@vue/babel-preset-jsx'],
}
```
> å¦‚æœä½ å‡ºç°è¿™ä¸ªé”™è¯¯ï¼š [https://github.com/vuejs/jsx/issues/34](https://github.com/vuejs/jsx/issues/34)

`Duplicate declaration "h" (This is an error on an internal node. Probably an internal error.)`
è¯•è¯•è¿™ä¸ªï¼ˆéœ€è¦è¯´æ˜Hå‡½æ•°ä¼ é€’ï¼‰
```vue
module.exports = {
  presets: [
    [
      '@vue/babel-preset-jsx',
      {
        injectH: false
      }
    ]
  ]
}

```


#### babel 6
`npm install babel-plugin-syntax-jsx babel-plugin-transform-vue-jsx babel-helper-vue-jsx-merge-props babel-preset-env --save-dev`

- é…ç½®`.babelrc`
```vue
{
  "presets": ["env"],
  "plugins": ["transform-vue-jsx"]
}
```
## ä½¿ç”¨
æˆ‘è¿™é‡Œä¸¾ä¾‹æ¯”è¾ƒå¤æ‚çš„ä¾‹å­  ä¹Ÿæ˜¯æˆ‘é‡åˆ°çš„
### slot
æ­£å¸¸çš„`code`æ˜¯è¿™æ ·çš„, `element-ui`ä¸¾ä¾‹
```vue
<el-table-column
  label="å§“å"
  width="180">
  <template slot-scope="scope">
    <el-popover trigger="hover" placement="top">
      <p>å§“å: {{ scope.row.name }}</p>
      <p>ä½å€: {{ scope.row.address }}</p>
      <div slot="reference" class="name-wrapper">
        <el-tag size="medium">{{ scope.row.name }}</el-tag>
      </div>
    </el-popover>
  </template>
</el-table-column>
```
#### Table-column Scoped Slot
| name | è¯´æ˜ |
| --- | --- |
| â€” | è‡ªå®šä¹‰åˆ—çš„å†…å®¹ï¼Œå‚æ•°ä¸º { row, column, $index } |
| header | è‡ªå®šä¹‰è¡¨å¤´çš„å†…å®¹. å‚æ•°ä¸º { column, $index } |

ğŸ–è½¬æ¢æˆjsxå°±æ˜¯
```jsx
<el-table-column
  label='å§“å'
  width='180' {
    ...{
      scopedSlots: {
        default: scope => {
          return <el-popover trigger='hover' placement='top'>
            <p>å§“å: { scope.row.name }</p>
            <p>ä½å€: { scope.row.address }</p>
            <div slot='reference' class='name-wrapper'>
              <el-tag size='medium'>{ scope.row.name }</el-tag>
            </div>
          </el-popover>
        }
      }
    }
  }>
</el-table-column>
```

